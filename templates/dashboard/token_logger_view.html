{% extends 'dashboard/index.html' %}
{% load static %}

{% block content %}

<div class="container-fluid" style="max-width:none">
    <div class="card mt-5">
        <div class="card-body">
            <h5 class="card-title fw-semibold mb-4">Token Logger</h5>
            <!-- TokenLogger Listing Table -->
            <div class="table-responsive"> <!-- Make table responsive -->
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th class="text-nowrap">SL No</th> <!-- Ensure nowrap for serial numbers -->
                            <th class="text-nowrap">Token Type</th>
                            <th class="text-nowrap">Token Value</th>
                            <th class="text-nowrap">Created At</th>
                            <th class="text-nowrap">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                      {% for token in tokens %}
                      <tr>
                          <td>{{ forloop.counter }}</td> <!-- Serial Number -->
                          <td>{{ token.tokenType }}</td> <!-- Token Type -->
                          <td>{{ token.tokenValue|slice:":50" }}</td> <!-- Slice to show first 50 characters of the token value -->
                          <td>{{ token.created_at }}</td> <!-- Token creation time -->
                          <td>
                              <!-- Copy Button -->
                              <button class="btn btn-info btn-sm" onclick="copyToClipboard('{{ token.tokenValue }}')">Copy</button>
                          </td>
                      </tr>
                      {% endfor %}
                  </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for copying token value -->
<script>
    // Function to copy the token value to clipboard
    function copyToClipboard(tokenValue) {
        navigator.clipboard.writeText(tokenValue).then(function() {
            alert('Token value copied to clipboard!');
        }, function(err) {
            alert('Failed to copy token value: ' + err);
        });
    }
</script>

{% endblock %}

{% block optional_js %}
<!-- Remove additional JS imports -->
{% endblock %}
